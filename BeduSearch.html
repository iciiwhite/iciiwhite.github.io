<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeduSearch | Dev Intelligence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-[#f8f9fa] min-h-screen font-sans">

    <header class="bg-white border-b p-6 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto">
            <div class="flex flex-col md:flex-row items-center gap-6">
                <h1 class="text-3xl font-black text-blue-600 tracking-tighter">BEDU</h1>
                <div class="relative w-full max-w-2xl">
                    <input type="text" id="searchInput" placeholder="Search developers, code, or tech info..." 
                        class="w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-full shadow-sm hover:shadow-md focus:shadow-md focus:outline-none transition-all">
                    <i class="fa fa-search absolute left-5 top-4 text-gray-400"></i>
                </div>
            </div>
            <div class="flex gap-8 mt-6 ml-2 text-sm font-medium text-gray-500">
                <button onclick="switchTab('info')" id="tab-info" class="pb-2 border-b-2 border-blue-600 text-blue-600 flex items-center gap-2">
                    <i class="fa fa-file-alt"></i> Information
                </button>
                <button onclick="switchTab('images')" id="tab-images" class="pb-2 border-b-2 border-transparent hover:text-gray-700 flex items-center gap-2">
                    <i class="fa fa-image"></i> Images
                </button>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-6">
        <div id="resultsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="col-span-full text-center py-20 text-gray-400">
                <p>Start by searching for a technology or a developer name.</p>
            </div>
        </div>
    </main>

    <script>
        const resultsGrid = document.getElementById('resultsGrid');
        const searchInput = document.getElementById('searchInput');
        let currentTab = 'info';
        let lastQuery = '';

        // Handle Search
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                lastQuery = e.target.value;
                performSearch();
            }
        });

        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('header button').forEach(btn => btn.classList.remove('border-blue-600', 'text-blue-600'));
            document.getElementById(`tab-${tab}`).classList.add('border-blue-600', 'text-blue-600');
            if (lastQuery) performSearch();
        }

        async function performSearch() {
            resultsGrid.innerHTML = '<div class="col-span-full text-center py-10">Searching...</div>';
            
            if (currentTab === 'info') {
                await fetchInformation(lastQuery);
            } else {
                await fetchImages(lastQuery);
            }
        }

        async function fetchInformation(q) {
            // Using a CORS proxy for StackOverflow and Dev.to
            const proxy = "https://api.allorigins.win/get?url=";
            
            const [repos, users, so, devto] = await Promise.allSettled([
                fetch(`https://api.github.com/search/repositories?q=${q}`).then(r => r.json()),
                fetch(`https://api.github.com/search/users?q=${q}`).then(r => r.json()),
                fetch(`${proxy}${encodeURIComponent(`https://api.stackexchange.com/2.3/search/advanced?q=${q}&site=stackoverflow`)}`).then(r => r.json()),
                fetch(`${proxy}${encodeURIComponent(`https://dev.to/api/articles?tag=${q}`)}`).then(r => r.json())
            ]);

            let html = '';

            // 1. GitHub Users (The "People" search you requested)
            if (users.value?.items) {
                users.value.items.slice(0, 3).forEach(user => {
                    html += `
                        <div class="bg-blue-50 border border-blue-100 p-4 rounded-xl flex items-center gap-4">
                            <img src="${user.avatar_url}" class="w-12 h-12 rounded-full">
                            <div>
                                <h4 class="font-bold text-blue-800">${user.login}</h4>
                                <a href="${user.html_url}" target="_blank" class="text-xs text-blue-600">View Developer Profile</a>
                            </div>
                        </div>
                    `;
                });
            }

            // 2. Repositories
            if (repos.value?.items) {
                repos.value.items.slice(0, 10).forEach(repo => {
                    html += createCard(repo.full_name, repo.description, repo.html_url, 'GitHub', 'fa-github', 'text-black');
                });
            }

            // 3. StackOverflow (Parsed through proxy)
            const soData = so.value ? JSON.parse(so.value.contents) : null;
            if (soData?.items) {
                soData.items.slice(0, 5).forEach(item => {
                    html += createCard(item.title, 'Developer Solution on StackOverflow', item.link, 'StackOverflow', 'fa-stack-overflow', 'text-orange-500');
                });
            }

            resultsGrid.innerHTML = html || '<p class="col-span-full">No information found.</p>';
        }

        async function fetchImages(q) {
            // Fetching tech-related images from Unsplash (Public API)
            const res = await fetch(`https://api.unsplash.com/search/photos?query=${q}+tech&client_id=YOUR_UNSPLASH_KEY_OPTIONAL`);
            // Note: Since you're in test mode, we use a public tech image placeholder if Unsplash key isn't provided
            
            let html = '';
            for(let i=1; i<=9; i++) {
                html += `
                    <div class="overflow-hidden rounded-xl bg-white shadow-sm">
                        <img src="https://loremflickr.com/400/300/${q},programming?lock=${i}" class="w-full h-48 object-cover hover:scale-105 transition-transform">
                        <div class="p-3 text-xs text-gray-500 font-medium italic">Contextual Image: ${q} #${i}</div>
                    </div>
                `;
            }
            resultsGrid.innerHTML = html;
        }

        function createCard(title, desc, link, source, icon, color) {
            return `
                <a href="${link}" target="_blank" class="bg-white p-5 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                    <div class="flex items-center gap-2 mb-3">
                        <i class="fa-brands ${icon} ${color}"></i>
                        <span class="text-[10px] uppercase font-bold tracking-widest text-gray-400">${source}</span>
                    </div>
                    <h3 class="font-bold text-gray-900 mb-2 line-clamp-1">${title}</h3>
                    <p class="text-sm text-gray-500 line-clamp-2">${desc || 'No description available.'}</p>
                </a>
            `;
        }
    </script>
</body>
</html>